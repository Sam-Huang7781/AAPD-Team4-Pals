<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <title>homepage</title>
  </head>
  <body>
    <%- include('./layout/header'); -%>

    <section
      class="meditate-program bg-primary-light d-flex flex-column justify-content-center align-items-center position-relative"
    >
      <!-- meditate-programming 冥想進行頁 -->
      <div class="container bg-primary-dark">
        <div class="mx-n3 pb-20">
          <div
            class="ui-top d-flex align-items-center justify-content-center px-12 py-10"
          >
            <img src="../assets/images/meditateCount/Close_48.png" alt="" />
            <h3 class="fs-5 mx-12 text-white">正念冥想</h3>
            <img src="../assets/images/meditateCount/voice_48.png" alt="" />
          </div>
          <h4 class="meditate-instruction fs-5 text-white text-center">
            深吸氣，數到四
          </h4>
          <div
            class="meditate-progress d-flex justify-content-center p-8 position-relative"
          >
            <div id="progress-circle" style="width: 288px"></div>
            <img
              src="../assets/images/meditateCount/dolls-meditiating_Y.png"
              class="position-absolute top-50 start-50 translate-middle object-fit-none"
              alt="dolls_meditiating_Y"
            />
          </div>
          <h4 class="fs-5 text-text-tertiary text-center mt-4">您已經冥想了</h4>
          <time
            datetime="00:37"
            class="d-block fs-10 text-text-tertiary fw-bold text-center mx-6 my-2"
            id="timer"
            style="letter-spacing: 4.8px"
            >00:37</time
          >
          <div
            class="ui-bottom d-flex align-items-center justify-content-center px-12 py-3"
          >
            <img src="../assets/images/meditateCount/back.svg" alt="" />
            <img
              src="../assets/images/meditateCount/StopButton_80.png"
              class="mx-12"
              id="start-meditation"
              alt="StopButton_80"
            />
            <img src="../assets/images/meditateCount/forth.svg" alt="forth" />
          </div>
        </div>
      </div>
    </section>

    <!-- <%- include('./layout/footer'); -%> -->

    <script type="module" src="../main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="../node_modules/progressbar.js/dist/progressbar.min.js"></script>
    <script>
      var bar = new ProgressBar.Circle("#progress-circle", {
        strokeWidth: 4,
        easing: "easeInOut",
        duration: 1400,
        color: "#ffcc00",
        trailColor: "#eee",
        trailWidth: 4,
        svgStyle: null,
      });
      bar.set(0.125); // 75% progress

      //   計時器
      let seconds = 38;
      const timerElement = document.getElementById("timer");

      const updateTimer = () => {
        // 如果秒數到達40，停止遞增
        if (seconds >= 40) {
          clearInterval(timerInterval);
        }

        // 格式化成兩位數的時間表示
        let formattedSeconds = seconds < 10 ? "0" + seconds : seconds;
        timerElement.textContent = `00:${formattedSeconds}`;

        // 增加秒數
        seconds++;
      };

      // 每秒更新一次秒數
      const timerInterval = setInterval(updateTimer, 1000);

      // 在window load後3秒觸發跳轉事件
      window.onload = function () {
        setTimeout(function () {
          window.location.href = "./meditate-complete.html"; // 跳轉目標頁面URL
        }, 3000); // 3秒（3000毫秒）後跳轉
      };
    </script>
  </body>
</html>
